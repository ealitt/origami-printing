<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="a javascript port of potrace" />
    <meta name="keywords" content="potrace,trace,vectorization,svg" />

    <title>potrace</title>
    <style>
body {
  margin: 30px;
  background-color: #eee;
}

h1 {
  font-weight:bold;
  font-size:2.5em;
  text-transform:capitalize;
  letter-spacing: 0.1em;
}

a:link, a:visited{
  color:#6d6e73;
}

a:hover, a:focus, a:active {
  color:#444;
}

p{
  margin: 5px;
}

#imgdiv, #svgdiv {
  display: none;
  border: 2px solid #ccc;
  margin: 10px 0;
  padding: 10px;
  border-radius: 5px;
}

#drop {
  border: 2px dashed #ccc;
  width: 170px;
  padding: 10px;
  margin: 20px 0;
  text-align: center;
  border-radius: 5px;
}

#drop.hovering{
  border: 2px dashed #333;
}

#run, #save{
  border: 1px solid #555;
  border-radius: 5px;
  padding: 2px 5px;
  text-decoration: none;
  background-color: #ddd;
}

#run:hover, #save:hover{
  background-color: #eee;
}

#imageInput {
  display: none;
}

    </style>
  </head>

  <body>
    <header>
      <h1>potrace</h1>
    </header>

    <article>
      <p>A javascript port of <a href="http://potrace.sourceforge.net" target="_blank">Potrace</a>.</p>
      <p><a href="https://github.com/kilobtye/potrace">source code</a></p>
      <input type="file" id="imageInput" accept="image/*">
      <div id="drop"><a href="#" id="imageSelect">open an image</a> <br> or drag an image here</div>
      <div>
        <a href="#" id="run">open Yao.jpg</a>
        <a href="#" id="save">download</a>
      </div>
      <div id="imgdiv"> </div>
      <div> </div>
      <div id="svgdiv"> </div>
    </article>

<script src="js/potrace.js"></script>
<script>

window.onload = function(){
  var imageSelect = document.getElementById("imageSelect"),
      imageInput = document.getElementById("imageInput");
  imageSelect.addEventListener("click", function (e) {
    imageInput.click();
    e.preventDefault();
  }, false);

  imageInput.addEventListener("change", function (e) {
    handleFiles(this.files);
  }, false);

  document.getElementById("run").addEventListener("click", function (e) {
    Potrace.loadImageFromUrl("yao.jpg");
    Potrace.process(function(){
      displayImg();
      displaySVG(3);
    });
  }, false);

  document.getElementById("save").addEventListener("click", function (e) {
	 e.target.download = "potrace" + (new Date()).toLocaleTimeString() + ".svg";
	 e.target.href = "data:image/svg+xml;," + Potrace.getSVG(1);
  }, false);

  var drop = document.getElementById('drop');
  drop.addEventListener("dragenter", function (e) {
    if (e.preventDefault) e.preventDefault();
    e.dataTransfer.dropEffect = 'copy';
    this.classList.add('hovering');
    return false;
  }, false);

  drop.addEventListener("dragleave", function (e) {
    if (e.preventDefault) e.preventDefault();
    e.dataTransfer.dropEffect = 'copy';
    this.classList.remove('hovering');
    return false;
  }, false);

  drop.addEventListener("dragover", function (e) {
    if (e.preventDefault) e.preventDefault();
    e.dataTransfer.dropEffect = 'copy';
    this.classList.add('hovering');
    return false;
  }, false);

  drop.addEventListener("drop", function (e) {
    if (e.preventDefault) e.preventDefault();
    this.classList.remove('hovering');
    handleFiles(e.dataTransfer.files);
    return false;
  }, false);
};

function handleFiles(files) {
  Potrace.loadImageFromFile(files[0]);
  console.log(files[0]);
  Potrace.process(function(){
    displayImg();
    displaySVG(1);
  });
}

function displayImg(){
  var imgdiv = document.getElementById('imgdiv');
  imgdiv.style.display = 'inline-block';
  imgdiv.innerHTML = "<p>Input image:</p>";
  imgdiv.appendChild(Potrace.img);
}

function displaySVG(size, type){
  var svgdiv = document.getElementById('svgdiv');
  svgdiv.style.display = 'inline-block';
  svgdiv.innerHTML = "<p>Result:</p>" + Potrace.getSVG(size, type);
}

</script>

  </body>
</html>


<!-- <script src="http://evanw.github.com/glfx.js/glfx.js"></script>
<script>
var canvas;
var texture;
var textureA;
var textureB;
function toggle() {
    texture = (texture == textureA) ? textureB : textureA;
    canvas.draw(texture).ink(1).update();
}
window.onload = function() {
    canvas = fx.canvas();
    document.body.appendChild(canvas);
    textureA = canvas.texture(document.getElementById('imageA'));
    textureB = canvas.texture(document.getElementById('imageB'));
    setInterval(toggle, 500);
};
</script>
<img id="imageA" src="images/test.jpg">
<img id="imageB" src="images/test2.png"> -->

<!-- <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" type="text/css" href="css/style.css" media="screen">
  <link rel="stylesheet" type="text/css" href="css/jquery/jquery-ui.css" media="screen">

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script type="text/javascript" src="http://evanw.github.com/glfx.js/glfx.js"></script>
</head>

<div id="Image" class="tabcontent">
  <h3>Image</h3>
  <div id="input-image" class="displayedImage">
    <img id="image" src="images/test2.png"></img>
  </div>
  <div class="slider-container">
    <label>Brightness</label>
    <div id="slider-brightness" style="background: #AEBBBF;"></div>
    <label>Contrast</label>
    <div id="slider-contrast" style="background: #AEBBBF;"></div>
  </div>
  <div class="toggle-container">
    <label>Black and White</label>
    <input id="blackAndWhite" type="checkbox" value=true><br>
  </div>
</div>

<script>

window.onload = function() {
    // try to create a WebGL canvas (will fail if WebGL isn't supported)
    try {
        var canvas = fx.canvas();
    } catch (e) {
        alert(e);
        return;
    }

    // convert the image to a texture
    var image = document.getElementById('image');
    var texture = canvas.texture(image);

    // apply the ink filter
    canvas.draw(texture).ink(1).update();

    // replace the image with the canvas
    image.parentNode.insertBefore(canvas, image);
    image.parentNode.removeChild(image);
};

function slider() {
  $( "#slider-brightness" ).slider({
    value: 50,
    animate:"fast",
    orientation: "horizontal",
    slide: function( event, ui ) {
      brightness = $( "#slider-brightness" ).slider( "value" ) / 100;
      canvas.draw(textureEdited).brightnessContrast(brightness,0).update();
    }
  });
}

</script> -->

<!-- <!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">

<head>
    <title>Document</title>
    <script type="text/javascript" src="http://evanw.github.com/glfx.js/glfx.js"></script>
</script>
</head>

<body>
  <img id="image" src="images/test.jpg" />
  <img id="image2" src="images/test.jpg" />
  <input id="upload" class="upload" type="file"/>
    <script>
        window.onload = function () {
            // try to create a WebGL canvas (will fail if WebGL isn't supported)
            try {
                var canvas = fx.canvas();
            } catch (e) {
                alert(e);
                return;
            }
            let image = document.getElementById('image');
            let image2 = document.getElementById('image2');
            let source = document.getElementById('upload');

            source.addEventListener('change', (e) => {
            image.src = URL.createObjectURL(e.target.files[0]);
            image2.src = URL.createObjectURL(e.target.files[0]);
            }, false);

            image.onload = function() {
            var texture = canvas.texture(image);
            var texture2 = canvas.texture(image2);

            texture.draw(image).ink(1).update();
          };

            // apply the ink filter

        };
    </script>
</body>
</html> -->
